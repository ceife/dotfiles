# Thanks for:
#   Guide: https://neomutt.org/guide/reference.html
#   AlexTheMad: https://ubuntuforums.org/archive/index.php/t-1197245.html
#   https://raw.githubusercontent.com/neomutt/samples/master/config/neomuttrc-example
#   Jeffrey Tong: https://medium.com/@itsjefftong/mutt-gmail-59447a4bffef
#   Miguel Mota: https://gist.github.com/miguelmota/9456162

# sources
source ~/.config/neomutt/aliases
source ~/.config/neomutt/theme

#folder-hook 'account.gmail.dev.felipe.dacs'     'source ~/.config/neomutt/account.gmail.dev.felipe.dacs'
#folder-hook 'account.gmail.felipe.dacs'         'source ~/.config/neomutt/account.gmail.felipe.dacs'

# Default account
source ~/.config/neomutt/account.gmail.felipe.dacs         

# Macros for switching accounts
bind index a noop # remove existing bind for a
macro index a1 '<sync-mailbox><enter-command>unmailboxes *<enter><enter-command>source ~/.config/neomutt/account.gmail.felipe.dacs<enter><change-folder>!<enter>'
macro index a2 '<sync-mailbox><enter-command>unmailboxes *<enter><enter-command>source ~/.config/neomutt/account.gmail.dev.felipe.dacs<enter><change-folder>!<enter>'

# Secure
set ssl_starttls=yes
set ssl_force_tls=yes

# update a buffer in:
set mail_check=90
set timeout=15

# Sidebar
set sidebar_visible = yes
set sidebar_width = 35
set sidebar_format = "%B%?F? [%F]?%* %?N?%N/?%S"
set mail_check_stats
set sidebar_sort_method = 'path'
#set imap_check_subscribed # labels gmail
#set sidebar_delim_chars='.' # See absolute path, its necessary when you dont know name to put in mailbox inside account.etc file
bind index \Cj sidebar-next
bind index \Ck sidebar-prev
bind index \Cl sidebar-open

# Message Pager
unhdr_order * # Zera ordem de fields para serem setados logo abaixo
hdr_order Date: From: To: Cc: Reply-To: Subject: # Ordem de fields do email
set include # quote msg when replying
set reply_to # use adress from reply-to header when replying
set fast_reply # do not ask for to, subject,.. when replying
set auto_tag # if something is tagged run commands on all tagged msgs
set delete_untag # untag msgs when marking them for deletion
set mark_old = no # don't differentiate between new and old
set forward_format="Fwd: %s"
set editor = "nvim"
set charset = "utf-8"
auto_view text/html

# Index
set index_format="%4C [%Z] %{%d/%b/%y %H:%M} %-15.15L %s"
set sort=reverse-threads
bind index N compose-to-sender

# Compose
set abort_nosubject=ask-no
bind index,pager @ compose-to-sender

set quit=ask-no
